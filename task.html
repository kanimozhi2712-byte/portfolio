<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GSAP 3D Image Ring</title>

  <!-- GSAP -->
  <script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
  <script src="https://unpkg.com/gsap@3/dist/Draggable.min.js"></script>

  <style>
    * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background: #000;
  height: 100vh;
  overflow: hidden;
  perspective: 1200px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* invisible drag layer */
#dragger {
  position: absolute;
  width: 100%;
  height: 100%;
  cursor: grab;
  z-index: 10;
}

/* ring container */
#ring {
  position: relative;
  width: 700px;
  height: 300px;
  transform-style: preserve-3d;
}

/* image cards */
.img {
  position: absolute;
  width: 700px;
  height: 300px;
  background-size: cover;
  border-radius: 12px;
  box-shadow: 0 20px 40px rgba(138, 43, 226, 0.35);
}

  </style>
</head>
<body>

  <!-- drag layer -->
  <div id="dragger"></div>

  <!-- 3D ring -->
  <div id="ring">
    <div class="img"></div>
    <div class="img"></div>
    <div class="img"></div>
    <div class="img"></div>
    <div class="img"></div>
     <div class="img"></div>
      <div class="img"></div>
       <div class="img"></div>
  </div>

  <script>
    const ring = document.getElementById("ring");
const dragger = document.getElementById("dragger");

let xPos = 0;

/* LOCAL IMAGES */
const images = [
  "assets/img/portfolio/a.png",
  "assets/img/portfolio/cer1.jpg",
  "assets/img/portfolio/com.png",
  "assets/img/portfolio/a.png",
  "assets/img/portfolio/cer1.jpg",
  "assets/img/portfolio/cer1.jpg",
  "assets/img/portfolio/cer2.jpg",
  "assets/img/portfolio/com.png"
];

gsap.timeline()
  .set(dragger, { opacity: 0 })
  .set(ring, { rotationY: 180 })
  .set(".img", {
    rotateY: (i) => i * -36,
    transformOrigin: "50% 50% 500px",
    z: -500,
    backgroundImage: (i) => `url(${images[i]})`,
    backfaceVisibility: "hidden"
  })
  .from(".img", {
    duration: 1.5,
    y: 200,
    opacity: 0,
    stagger: 0.1,
    ease: "expo"
  });

Draggable.create(dragger, {
  onDragStart: (e) => {
    if (e.touches) e.clientX = e.touches[0].clientX;
    xPos = Math.round(e.clientX);
  },

  onDrag: (e) => {
    if (e.touches) e.clientX = e.touches[0].clientX;

    gsap.to(ring, {
      rotationY: "-=" + ((Math.round(e.clientX) - xPos) % 360),
      onUpdate: () =>
        gsap.set(".img", {

        })
    });

    xPos = Math.round(e.clientX);
  },

  onDragEnd: () => {
    gsap.set(dragger, { x: 0, y: 0 });
  }
});

function getBgPos(i) {
  return (
    -gsap.utils.wrap(
      0,
      360,
      gsap.getProperty(ring, "rotationY") - 180 - i * 36
    ) /
      360 *
      400 +
    "px 0px"
  );
}

  </script>
</body>
</html>
